---
import Main from '../../layouts/Main.astro';
import BoardTable from '../../components/BoardTable';
import fetchApi from '../../lib/strapi';
import type { AssociationActive, AssociationPage } from 'src/types/types';
import { getHTMLfromMDX } from '../../common/common';

export async function getStaticPaths() {
  return [
    { params: { language: 'finnish' } },
    { params: { language: 'english' } },
  ];
}

const { language } = Astro.params

const associationPage = await fetchApi<AssociationPage>({
  endpoint: 'association-page',
  query: {
    locale: language === "english" ? "en" : "fi"
  },
  wrappedByKey: 'data',
});

const associationActive =
  (await fetchApi<AssociationActive[]>({
    endpoint: 'association-actives',
    wrappedByKey: 'data'
  })) ?? [];


console.log(associationPage)

const intro = getHTMLfromMDX(associationPage.associationIntroText, {
  h1: 'font-bold text-3xl m-2',
  p: 'p-8',
})

---

<Main>
  <div class="flex self-center flex-col w-3/4">
    {intro}
  </div>
  <h1 class="text-3xl font-bold">
    Board 2024
  </h1>
  <BoardTable boardMembers={associationActive} client:only="react"/>

</Main>
